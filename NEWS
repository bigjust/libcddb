$Id: NEWS,v 1.5 2003/05/07 19:01:49 airborne Exp $


This file describes the external changes and important bug fixes
between different libcddb releases.  These changes might impact the
programs that use this library.  It does not describe every single
change made to the code tree.  An overview of the CVS changes can be
found in the Changelog file.


THE FUTURE

The 0.9.x releases will be used to stabilize the current API toward
the big 1.0 release.  My intention is to improve the documentation,
expand the included example code, add several regression tests and fix
any bugs that are found.  When all this is finished, 1.0 will be
released.


CHANGES 0.9.2 -> 0.9.3

* [SECURITY] The default values for the user name and the host name
  that is used when contacting a CDDB server have been changed to
  'anonymous@localhost'.  Libcddb used to take the values from the
  $USER and $HOSTNAME environment variables if they were present.
  This would reveal confidential information about a user without that
  person knowing it.  It is still necessary to use a valid e-mail
  address when submitting a new or updated CDDB entry to the server.
  The libcddb write command will fail if the default value are still
  present.

* Extra regression tests were added to test caching behaviour.

* Some getters and setters were added for fields in the connection
  structure.

* It is now possible to customize the program name and version that is
  used when contacting a CDDB server.  This used to default to
  'libcddb' and the version number of the library being used.  Now it
  is possible for a developer to use the name of the program using the
  library.


CHANGES 0.9.1 -> 0.9.2

* [BUGFIX] There was a problem with multi-line track titles.  The
  title was being appended to title of the disc instead of to the one
  from the track.  This should now work correctly.

* [BUGFIX] The parsing state machine did not correctly detect the end
  of the stream if there was no extended data present.  This has been
  fixed by putting the state machine in the STOP state when the end of
  the stream is encountered.

* [BUGFIX] Fixed some memory leaks reported by Valgrind.

* The example program now returns the libcddb error code when exiting
  after a failure.  Proxy support has also been implemented.

* The regression tests have been expanded to include scripts that test
  the libcddb CDDB entry parser and networking code.  These networking
  tests need Internet connectivity and a working proxy server enabled
  through the http_proxy environment variable.


CHANGES 0.9.0 -> 0.9.1

* A Gentoo Linux ebuild file has been added in the misc/ directory.

* It is now possible to delete a disc/track title and artist name by
  setting it to NULL using one of the set functions for these fields.

* [BUGFIX] In the previous release, when reusing a CDDB disc structure
  for subsequent read operations, the disc and artist name were
  appended to what was already present in the structure.  This has
  been fixed by reseting those strings before setting the new values.

* The example program has been improved.  It now supports two extra
  commands.  One can be used to calculate the disc ID.  The other will
  query a CDDB server and report any matches that are found.  Support
  was also added to retrieve the necessary disc information from a CD
  in the CD-ROM drive.  To use this feature you will need an extra
  library, i.e. libcdio.  Information about this library can be found
  at: http://savannah.nongnu.org/projects/libcdio/.

* Extra getters and setters were added and the documentation of other
  library functions has been updated.


CHANGES 0.1.6 -> 0.9.0

* The src/ directory has been removed from the distribution.  But a
  new examples/ directory was added.  Currently the example program
  only supports the CDDB read command.  This example will be expanded
  in order to demonstrate every public function of the library.

* Local CDDB cache semantics have been expanded.  Next to the option
  to enable and disable caching that was already present, it is now
  also possible to force the use of the cache.  When this
  functionality is enabled and an entry is not found in the local
  cache a CDDB_ERR_DISC_NOT_FOUND error is returned.  Three functions
  have also been added to set the desired caching mode:
  - cddb_cache_enable(c)
  - cddb_cache_only(c)
  - cddb_cache_disable(c)
  All three functions expect a CDDB connection structure as a
  parameter.

* Several get and set functions have been added to the API.  It is my
  intention to have such functions for every possible field that a
  user is allowed to alter in the different library structures.  This
  will prevent problems in the future if the internal structures
  should change.

* When the length of a CD track is not set when you call the
  cddb_track_get_length function, it will be calculated.  The
  calculation uses the frame offsets of the current and next track and
  possibly the disc length.  The current implementation does not do
  any rounding of the calculated value to the nearest second.
  Therefore it is possible that the sum of the track lengths does not
  equal the disc length.  If the length can not be calculated -1 is
  returned.

* The network access code has been rewritten to use the network
  sockets directly instead of wrapping them in file descriptors.  This
  should enable BeOS users to use the library without having to change
  any code.  I don not have a BeOS system myself and am still waiting
  for a confirmation whether the changes were enough.

* Support has been added for reading CDDB entries that have
  multi-lined fields.  Support to also split certain fields into
  multiple lines when writing them (to the network or disc) is not yet
  present.  The FreeDB spec states that no line should be longer than
  256 characters.  This limit is not yet checked.

* Support to parse the year field of a CDDB entry has been added.
